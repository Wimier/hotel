

---

# 🏨 易旅酒店在线预订与管理系统 (Hotel Booking Full-Stack System)

## 📝 项目简介

本项目是一款基于 **SpringBoot** 和 **Uni-app** 开发的全栈酒店预订系统。系统分为**移动端小程序**（面向普通用户）和 **PC 端后台管理系统**（面向酒店商户及系统管理员）。

系统不仅实现了基础的酒店查询、预约下单和评价功能，还深度适配了多商户经营场景，实现了严密的数据权限隔离机制。

---

## 🚀 技术架构

### 后端技术栈 (hotel-backend)

* **核心框架**：Spring Boot
* **权限安全**：Spring Security + JWT (基于 RuoYi 框架二次开发)
* **持久层**：MyBatis + MySQL 8.0
* **开发工具**：IntelliJ IDEA, Maven

### 前端技术栈 (hotel-frontend)

* **用户端**：Uni-app + Vue 2 (支持发布为微信小程序/H5)
* **管理端**：Vue 2 + Element UI
* **开发工具**：HBuilderX, VS Code

---

## ✨ 核心功能亮点

### 1. 严格的多商户数据隔离 (Multi-tenant Isolation)

* **逻辑实现**：通过后端的 `merchant_id` 字段与登录用户的 `UserId` 进行动态绑定。
* **身份分流**：系统能自动识别登录者身份：
* **商户角色**：强制开启数据过滤，仅能管理自身名下的酒店及订单。
* **普通用户/管理员**：支持查看全平台酒店，满足 C 端用户的预订需求。



### 2. 智能化图片展示系统

* **多图处理**：前端通过自研的 `getImageUrl` 逻辑，完美处理数据库中逗号分隔的多张图片路径，确保首图精准加载。
* **路径兼容**：自动识别并转换相对路径与绝对路径。

### 3. 完整的订单与评价链路

* **业务闭环**：支持从选房、下单、入住状态控制到售后评价的全流程管理。
* **状态机驱动**：订单状态实时同步，商户可一键操作“代客下单”或“详情修改”。

---

## 🛠️ 快速启动指南

### 1. 后端部署

1. 创建 MySQL 数据库并导入项目中的 `.sql` 脚本。
2. 修改 `application-druid.yml` 中的数据库连接信息。
3. 启动 `RuoYiApplication.java`。

### 2. 前端部署

1. 使用 **HBuilderX** 打开 `hotel-frontend` 文件夹。
2. 修改 `request.js` 中的 `baseUrl` 为你本地的后端地址（如 `http://localhost:8080`）。
3. 点击“运行”编译到内置浏览器或微信开发者工具。

---

## 👨‍💻 开发者笔记

在本项目开发过程中，重点攻克了**MyBatis 动态 SQL 参数污染**导致的查询失效问题。通过在 Service 层引入显式的角色判定与参数初始化逻辑，彻底解决了非商户用户在查询时的“幽灵参数”干扰。

---
