<view class="list-container data-v-d3b6965c"><view class="header-fixed data-v-d3b6965c"><view class="search-wrap data-v-d3b6965c"><view class="search-main-box data-v-d3b6965c"><view data-event-opts="{{[['tap',[['goCitySelect',['$event']]]]]}}" class="city-picker data-v-d3b6965c" bindtap="__e"><text class="c-name data-v-d3b6965c">{{queryParams.city}}</text><text class="c-icon data-v-d3b6965c">â–¼</text></view><view class="v-line data-v-d3b6965c"></view><block wx:if="{{queryParams.keyword}}"><text data-event-opts="{{[['tap',[['resetKeyword',['$event']]]]]}}" class="reset-kw-btn data-v-d3b6965c" bindtap="__e">âœ•</text></block><input class="search-input data-v-d3b6965c" placeholder="æœç´¢é…’åº—/åœ°å" placeholder-style="color:#bbb;" data-event-opts="{{[['confirm',[['refreshList',['$event']]]],['input',[['__set_model',['$0','keyword','$event',[]],['queryParams']]]]]}}" value="{{queryParams.keyword}}" bindconfirm="__e" bindinput="__e"/><view class="action-icons data-v-d3b6965c"><text data-event-opts="{{[['tap',[['refreshList',['$event']]]]]}}" class="icon-search data-v-d3b6965c" bindtap="__e">ğŸ”</text><view class="mini-line data-v-d3b6965c"></view><text data-event-opts="{{[['tap',[['toggleMapMode',['$event']]]]]}}" class="icon-map data-v-d3b6965c" bindtap="__e">{{isMapMode?'ğŸ“‹':'ğŸ“'}}</text></view></view></view><block wx:if="{{!isMapMode}}"><view class="filter-bar data-v-d3b6965c"><view data-event-opts="{{[['tap',[['openCalendar',['$event']]]]]}}" class="date-pill data-v-d3b6965c" bindtap="__e"><text class="p-date data-v-d3b6965c">{{displayForm.inDateText+" - "+displayForm.outDateText}}</text><text class="p-arrow data-v-d3b6965c">â–¼</text></view><view class="sort-group data-v-d3b6965c"><view data-event-opts="{{[['tap',[['handleSort',['score']]]]]}}" class="{{['sort-item','data-v-d3b6965c',(sortType==='score')?'active':'']}}" bindtap="__e">æ¬¢è¿åº¦ </view><picker range="{{starOptions}}" range-key="label" data-event-opts="{{[['change',[['onStarChange',['$event']]]]]}}" bindchange="__e" class="data-v-d3b6965c"><view class="{{['sort-item','data-v-d3b6965c',(queryParams.starRating)?'active':'']}}">{{''+(selectedStarLabel||'æ˜Ÿçº§')+''}}</view></picker><view data-event-opts="{{[['tap',[['togglePriceOrder',['$event']]]]]}}" class="sort-item data-v-d3b6965c" bindtap="__e"> ä»·æ ¼ <text class="price-arrow data-v-d3b6965c">{{priceOrder==='asc'?'â†‘':'â†“'}}</text></view><view data-event-opts="{{[['tap',[['resetAllFilters',['$event']]]]]}}" class="sort-item reset-btn data-v-d3b6965c" bindtap="__e">é‡ç½®</view></view></view></block></view><view class="main-content data-v-d3b6965c"><block wx:if="{{!isMapMode}}"><scroll-view class="scroll-body data-v-d3b6965c" scroll-y="{{true}}" data-event-opts="{{[['scrolltolower',[['loadMore',['$event']]]]]}}" bindscrolltolower="__e"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="__i0__" wx:key="id"><view data-event-opts="{{[['tap',[['goDetail',['$0'],[[['hotelList','id',item.$orig.id,'id']]]]]]]}}" class="hotel-card data-v-d3b6965c" bindtap="__e"><image class="h-thumb data-v-d3b6965c" src="{{item.m0}}" mode="aspectFill"></image><view class="h-body data-v-d3b6965c"><view class="h-name data-v-d3b6965c">{{item.$orig.nameCn}}</view><view class="h-score-row data-v-d3b6965c"><text class="h-score data-v-d3b6965c">{{item.$orig.score||'4.5'}}</text><text class="h-score-text data-v-d3b6965c">åˆ† / è¶…èµ</text><text class="h-star data-v-d3b6965c">{{item.$orig.starRating+"æ˜Ÿ"}}</text></view><view class="h-tags data-v-d3b6965c"><block wx:if="{{item.$orig.hasWifi===1}}"><text class="t-item t-blue data-v-d3b6965c">å…è´¹WiFi</text></block><block wx:if="{{item.$orig.park==='å…è´¹'}}"><text class="t-item t-orange data-v-d3b6965c">å…è´¹åœè½¦</text></block></view><view class="h-price-row data-v-d3b6965c"><view class="h-price data-v-d3b6965c"><text class="p-unit data-v-d3b6965c">Â¥</text><text class="p-num data-v-d3b6965c">{{item.$orig.price}}</text><text class="p-start data-v-d3b6965c">èµ·</text></view></view></view></view></block><view class="load-more data-v-d3b6965c">{{loading?'æ­£åœ¨åŠ è½½...':noMore?'åˆ°åº•å•¦ï¼Œæ²¡æœ‰æ›´å¤šäº†':'ç»§ç»­ä¸Šåˆ’åŠ è½½'}}</view></scroll-view></block><block wx:else><view class="map-box data-v-d3b6965c"><map class="map-instance data-v-d3b6965c" latitude="{{mapCenter.latitude}}" longitude="{{mapCenter.longitude}}" markers="{{mapMarkers}}" show-location="{{true}}" data-event-opts="{{[['markertap',[['onMarkerTap',['$event']]]]]}}" bindmarkertap="__e"></map><block wx:if="{{activeHotel}}"><view data-event-opts="{{[['tap',[['goDetail',['$0'],['activeHotel.id']]]]]}}" class="floating-card data-v-d3b6965c" bindtap="__e"><image src="{{$root.m1}}" mode="aspectFill" class="data-v-d3b6965c"></image><view class="f-info data-v-d3b6965c"><view class="f-name data-v-d3b6965c">{{activeHotel.nameCn}}</view><view class="f-bottom data-v-d3b6965c"><text class="f-score data-v-d3b6965c">{{"â­ï¸ "+activeHotel.score+"åˆ†"}}</text><text class="f-price data-v-d3b6965c">{{"Â¥"+activeHotel.price+"èµ·"}}</text></view></view></view></block></view></block></view><wu-calendar vue-id="2e726674-1" insert="{{false}}" mode="range" color="#0086F6" data-ref="calendar" data-event-opts="{{[['^confirm',[['onCalendarConfirm']]]]}}" bind:confirm="__e" class="data-v-d3b6965c vue-ref" bind:__l="__l"></wu-calendar></view>